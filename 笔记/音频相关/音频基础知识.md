#模拟信号到数字信号的转变

为了将模拟信号转为数字信号, 需要经过三个步骤:

1. 采样: 在时间轴上对模拟信号进行数字化. 根据采样定理, 按比声音最高频率的二倍进行采样, 声音就能被完整的恢复. 由于人耳能听到的频率范围是在20~20KHz, 所以采样率一般为44.1kHz, 这样才能保证声音达到20k也能够被完整的量化.
2. 量化: 指的是在幅度轴上对信号进行数字化, 比如用16比特的二进制信号来表示一个声音的采样, 而16bit能表示的范围是: [-32768, 32767], 一共有65536个取值.
3. 编码: 将采样量化后的数字按照一定的格式进行记录, 比如顺序储存或者压缩储存.

# 音频的重要参数

* 采样率
* 量化精度
* 声道数
* 音频帧

## 采样率

* 将模拟信号转为数字信号时, 需要各一定的时间对模拟信号进行一个采样, 然后将这个采样, 用01来表示, 也就是数字化的过程. 采样率表示, 1S内, 对模拟信号进行多少次采样. 采样频率越高, 说明采样点之间越密集, 记录这段音频所有的数据量就越大, 因此音质也就越好.
* 为了保证声音不失效, 采样率应该在40kHz以上. 常用的音频采样频率有：8kHz、11.025kHz、22.05kHz、16kHz、37.8kHz、44.1kHz、48kHz、96kHz、192kHz等。

## 量化精度

* 对于一个采样点, 需要用二进制数字来表示, 这个二进制的大小可以是: 4bit, 8bit, 16bit, 32bit. 位数越多, 表示的声音就越精细, 声音的质量就越好. 不过数据量也会变大.
* 常见的位宽: 8bit, 16bit.

## 声道数

* 声道数一般表示声音录制时的音源数量或回放时相应的扬声器数量。

## 音频帧

音频不像视频那样, 有一帧一帧的概念. 它是约定一个时间为单位, 然后这个时间内的数据为一帧, 这个时间被称为采样时间. 这个时间没有特别的标准, 要看具体的编解码器.

## 计算一帧音频的大小

假设某通道的音频信号是采样率为8kHz，位宽为16bit，20ms一帧，双通道，则一帧音频数据的大小为：

```
int size = 8000 x 16bit x 0.02s  x 2 = 5120 bit = 640 byte
```

# 常见的音频压缩格式

* 音频压缩的原理, 就是将一个冗余信息去掉.
* 常见的压缩格式: WAV, MP3，AAC，OGG，WMA，Opus，FLAC，APE，m4a，AMR，等等

### WAV

* PCM代表采集得到的原始数据, 在PCM的数字格式上添加44字节, 就可以得到WAV格式. 44字节分别描述: PCM的采样率, 声道数, 数据格式等信息.
* 特点: 由于没有对数据进行有损压缩, 所以音质非常好, 并且大量软件都支持.

### MP3#

* 一种有损压缩格式, LAME库是MP3编码格式的一种实现, 
* 特点: 音质在128Kbit/s上表现不错, 压缩比比较高. 兼容性好, 因为大量的软件和硬件都支持.

### AAC

特点: 小于128Kbit/s的码率上表现优异, 多用于视频中的音频轨编码.

# Android提供的音频开发API

* 音频采集:  MediaRecoder，AudioRecord
* 音频播放: SoundPool，MediaPlayer，AudioTrack
* 音频编解码: MediaCodec
* NDK API: OpenSL ES